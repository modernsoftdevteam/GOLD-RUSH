<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GOLD RUSH PRO</title>
    <style>
        :root { 
            --gold: #FFD700; 
            --bg: #0b0f1a; 
            --card-bg: #161e2d;
            --success: #00FF87; 
        }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; touch-action: none; }
        
        .header { position: absolute; top: 0; width: 100%; height: 70px; background: rgba(0,0,0,0.9); display: flex; justify-content: space-around; align-items: center; z-index: 100; border-bottom: 2px solid #222; }
        .stat-box { font-size: 24px; font-weight: 900; color: var(--gold); }

        canvas { display: block; background: radial-gradient(circle, #1e293b 0%, #000 100%); }

        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.97); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 500; padding: 20px; text-align: center; }
        
        /* ‡¶¨‡ßú ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶∏‡ßá‡¶ï‡¶∂‡¶® */
        .balance-section {
            background: linear-gradient(180deg, rgba(255,215,0,0.1) 0%, transparent 100%);
            width: 100%; padding: 40px 0; border-radius: 0 0 50px 50px; margin-bottom: 20px;
        }
        .big-star { font-size: 80px; text-shadow: 0 0 30px rgba(255,215,0,0.5); display: block; margin-bottom: 10px; }
        .total-stars { font-size: 50px; font-weight: 900; color: #fff; margin: 0; }
        
        .redeem-container { width: 100%; max-height: 40vh; overflow-y: auto; }
        
        .redeem-card {
            width: 90%; background: #161e2d; margin: 12px auto; padding: 25px 20px; 
            border-radius: 20px; border: 1px solid #334155; display: flex; 
            justify-content: space-between; align-items: center;
        }
        
        .star-highlight { color: var(--gold); font-size: 24px; font-weight: 900; }
        .card-price { color: var(--success); font-size: 30px; font-weight: 900; background: rgba(0,255,135,0.1); padding: 5px 15px; border-radius: 10px; }

        .btn { padding: 20px; margin: 10px; border: none; border-radius: 20px; cursor: pointer; font-size: 22px; font-weight: bold; width: 300px; }
        .btn-play { background: linear-gradient(to right, #2ed573, #1abc9c); color: white; }
        .btn-back { background: transparent; color: #64748b; text-decoration: underline; border: none; margin-top: 15px; }

        input { padding: 20px; width: 85%; border-radius: 20px; border: 2px solid #334155; margin: 15px 0; text-align: center; font-size: 24px; background: #0f172a; color: #fff; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="header">
    <div class="stat-box">üí∞ <span id="coins">0</span></div>
    <div class="stat-box">‚≠ê <span id="stars">0</span></div>
</div>

<canvas id="gameCanvas"></canvas>

<div id="menu" class="overlay">
    <h1 style="color:var(--gold); font-size: 50px; margin-bottom: 40px;">GOLD RUSH</h1>
    <button class="btn btn-play" onclick="startGame()">START GAME</button>
    <button class="btn" style="background:#f39c12; color:white;" onclick="showRedeem()">WITHDRAW CASH</button>
</div>

<div id="resultPage" class="overlay hidden">
    <div style="font-size: 100px;">‚≠ê</div>
    <div style="font-size: 80px; color: var(--gold); font-weight: 900;" id="resScore">0</div>
    <button class="btn btn-play" onclick="startGame()">PLAY AGAIN</button>
    <button class="btn-back" onclick="showMenu()">GO TO MENU</button>
</div>

<div id="redeemPage" class="overlay hidden" style="justify-content: flex-start; padding: 0;">
    <div class="balance-section">
        <span class="big-star">‚≠ê</span>
        <p style="margin: 0; color: #64748b; font-size: 14px; text-transform: uppercase;">Your Total Stars</p>
        <h2 class="total-stars" id="currentStarsDisplay">0</h2>
    </div>
    <div class="redeem-container">
        <div class="redeem-card" onclick="openForm(1000, 10)"><div><span class="star-highlight">1,000 ‚≠ê</span></div><div class="card-price">‡ß≥‡ßß‡ß¶</div></div>
        <div class="redeem-card" onclick="openForm(5000, 60)"><div><span class="star-highlight">5,000 ‚≠ê</span></div><div class="card-price">‡ß≥‡ß¨‡ß¶</div></div>
        <div class="redeem-card" onclick="openForm(25000, 350)"><div><span class="star-highlight">25,000 ‚≠ê</span></div><div class="card-price">‡ß≥‡ß©‡ß´‡ß¶</div></div>
        <div class="redeem-card" onclick="openForm(100000, 1800)"><div><span class="star-highlight">100,000 ‚≠ê</span></div><div class="card-price">‡ß≥‡ßß‡ßÆ‡ß¶‡ß¶</div></div>
    </div>
    <button class="btn-back" onclick="hideRedeem()">CLOSE</button>
</div>

<div id="formPage" class="overlay hidden">
    <div style="background:var(--card-bg); padding:30px; border-radius:30px; width:85%; border:1px solid var(--gold);">
        <h3 id="selectedPlanText">Withdraw Stars</h3>
        <input type="number" id="userInput" placeholder="‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶¨‡¶æ ‡¶®‡¶ó‡¶¶ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        <button class="btn btn-play" style="width: 100%;" onclick="finalSubmit()">CONFIRM WITHDRAW</button>
        <button class="btn-back" onclick="closeForm()">CANCEL</button>
    </div>
</div>

<script>
    let coins = parseInt(localStorage.getItem('coins')) || 0;
    let stars = parseInt(localStorage.getItem('stars')) || 0;
    let currentWithdrawAmount = 0;
    let gameActive = false, items = [];

    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let basket = { x: canvas.width/2-60, w: 120, h: 50, y: canvas.height-140 };

    function updateUI() {
        document.getElementById('coins').innerText = coins.toLocaleString(); 
        document.getElementById('stars').innerText = stars.toLocaleString();
        document.getElementById('currentStarsDisplay').innerText = stars.toLocaleString();
        localStorage.setItem('coins', coins); 
        localStorage.setItem('stars', stars);
    }

    // ‡¶ù‡ßÅ‡ßú‡¶ø ‡¶Ü‡¶Å‡¶ï‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶¨‡¶æ‡¶Å‡¶∂‡ßá‡¶∞ ‡¶ñ‡¶æ‡¶Å‡¶ö‡¶æ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®)
    function drawBasket(x, y, w, h) {
        ctx.fillStyle = "#8B4513"; ctx.beginPath(); ctx.roundRect(x, y, w, h, 15); ctx.fill();
        ctx.strokeStyle = "#5D2E0A"; ctx.lineWidth = 2;
        for (let i = x + 15; i < x + w; i += 18) { ctx.beginPath(); ctx.moveTo(i, y); ctx.lineTo(i, y + h); ctx.stroke(); }
        for (let j = y + 10; j < y + h; j += 15) { ctx.beginPath(); ctx.moveTo(x, j); ctx.lineTo(x + w, j); ctx.stroke(); }
        ctx.fillStyle = "#633311"; ctx.fillRect(x - 5, y, w + 10, 8);
    }

    function startGame() { hideAll(); items = []; gameActive = true; spawn(); loop(); }

    function spawn() {
        if(!gameActive) return;
        items.push({ x: Math.random()*(canvas.width-40)+20, y: -20, s: 7, t: Math.random()>0.85 ? 's':'g' });
        setTimeout(spawn, 850);
    }

    function loop() {
        if(!gameActive) return;
        ctx.clearRect(0,0,canvas.width, canvas.height);
        drawBasket(basket.x, basket.y, basket.w, basket.h);
        
        items.forEach((item, i) => {
            item.y += item.s;
            ctx.font="35px Arial";
            ctx.fillText(item.t==='s'?'‚≠ê':'üü°', item.x-17, item.y+15);
            if(item.y > basket.y && item.y < basket.y+basket.h && item.x > basket.x && item.x < basket.x+basket.w) {
                if(item.t==='s') stars += 10; else coins += 5;
                items.splice(i, 1); updateUI();
            }
            if(item.y > canvas.height) { gameActive = false; showResult(); }
        });
        requestAnimationFrame(loop);
    }

    function showResult() { hideAll(); document.getElementById('resScore').innerText = stars; document.getElementById('resultPage').classList.remove('hidden'); updateUI(); }
    function showMenu() { hideAll(); document.getElementById('menu').classList.remove('hidden'); }
    function hideAll() { document.querySelectorAll('.overlay').forEach(p => p.classList.add('hidden')); }
    function showRedeem() { updateUI(); hideAll(); document.getElementById('redeemPage').classList.remove('hidden'); }
    function hideRedeem() { hideAll(); showMenu(); }

    function openForm(starAmount, taka) { 
        if(stars >= starAmount) {
            currentWithdrawAmount = starAmount;
            document.getElementById('selectedPlanText').innerText = `${starAmount} Stars for ‡ß≥${taka}`;
            document.getElementById('formPage').classList.remove('hidden'); 
        } else { alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶®‡ßá‡¶á!"); }
    }
    
    function closeForm() { document.getElementById('formPage').classList.add('hidden'); }
    
    function finalSubmit() { 
        const num = document.getElementById('userInput').value;
        if(num.length < 10) return alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®");
        if(confirm(`‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ${currentWithdrawAmount} ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`)) {
            stars -= currentWithdrawAmount;
            updateUI();
            window.open(`https://wa.me/916295650647?text=Withdraw_Request:%20${currentWithdrawAmount}%20Stars%20to%20Number:%20${num}`); 
            alert("‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§");
            location.reload(); 
        }
    }

    canvas.addEventListener('touchmove', e => { e.preventDefault(); basket.x = e.touches[0].clientX - basket.w/2; }, {passive: false});
    updateUI();
</script>
</body>
</html>
